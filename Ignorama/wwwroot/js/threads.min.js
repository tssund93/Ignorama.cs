function updateFilename(){temp=$("#upload").val().split(".");extension=temp[temp.length-1];$("#filename").val(window.performance.now().toString().replace(".","")+"."+extension);document.getElementById("submitbutton").disabled=!0;$("#uploadsubmit").click()}var threadsVue=new Vue({el:"main",data:{threads:[],view:this.$cookies.get("view")?this.$cookies.get("view"):"",tags:[],selectedTags:[],search:""},created:function(){axios.get("/Threads/GetThreads").then(n=>{this.threads=n.data});axios.get("/Tags/GetTags").then(n=>{this.tags=n.data});axios.get("/Tags/GetSelectedTags").then(n=>{this.selectedTags=n.data})},filters:{date:function(n){return n?(n=new Date(n),n.toLocaleString()):""}},computed:{visibleThreads:function(){var n=[],t;return n=this.view===""?this.threads.filter(n=>!n.Hidden):this.view==="hidden"?this.threads.filter(n=>n.Hidden):this.view==="following"?this.threads.filter(n=>n.Following&&!n.Hidden):this.threads.filter(n=>!n.Hidden),t=new RegExp(".*?"+this.search.replace(/\s+/ig,".*?")+".*?","ig"),n.filter(n=>this.selectedTags.includes(n.Tag.ID)&&t.test(n.Title+" "+n.FirstPost.Text)).sort((n,t)=>t.Stickied-n.Stickied)}},watch:{view:function(n){this.$cookies.set("view",n)}},methods:{toggleHidden:function(n){n.Hidden=!n.Hidden;axios.post("/Threads/ToggleHidden",{ThreadID:n.ID}).then(n=>{console.log("Toggled hidden for thread "+n.data)}).catch(n=>{console.error("Error toggling hidden: "+n)})},toggleStickied:function(n){n.Stickied=!n.Stickied;axios.post("/Threads/ToggleStickied/"+n.ID).then(n=>{console.log("Toggled stickied for thread "+n.data)}).catch(n=>{console.error("Error toggling stickied: "+n)})},toggleLocked:function(n){n.Locked=!n.Locked;axios.post("/Threads/ToggleLocked/"+n.ID).then(n=>{console.log("Toggled locked for thread "+n.data)}).catch(n=>{console.error("Error toggling locked: "+n)})},unfollow:function(n){n.Following=!1;axios.post("/Threads/Unfollow",{ThreadID:n.ID}).then(n=>{console.log("Unfollowed thread "+n.data)}).catch(n=>{console.error("Error unfollowing thread: "+n)})},updateSelectedTag:function(n){axios.post("/Tags/ToggleSelectedTag",{TagID:n.ID}).then(n=>{console.log("Updated selected tag "+n.data)}).catch(n=>{console.error("Error updating selected tag: "+n)})}}});$(document).ready(function(){$(function(){$("#uploadForm").submit(function(){var i,n;$('<input type="hidden" name="javascript" value="yes" />').appendTo($(this));i="iframeUpload";n=$('<iframe id="uploadframe" name="'+i+'" src="about:blank" />');n.css("display","none");$("body").append(n);$(this).attr({action:"/Home/UploadFile",method:"post",enctype:"multipart/form-data",encoding:"multipart/form-data",target:i});var r=0,u=60,t=document.getElementById("postfield").value,f=t+" Uploading file",e=setInterval(function(){var i=document.getElementById("uploadframe").contentWindow.error,o,s;typeof i!="undefined"||r>u?(r>u&&(document.getElementById("postfield").value=t,alert("Upload timed out.  Your file is probably too big. (Max: 10 MB)"),document.getElementById("submitbutton").disabled=!1),document.getElementById("postfield").value=t,clearInterval(e),n.remove(),document.getElementById("submitbutton").disabled=!1):(document.getElementById("postfield").value=f+".",f=document.getElementById("postfield").value);$('input[name="javascript"]').remove();inputLength=0;inputLength+=$('input[name="file"]').val().length;0<inputLength&&i==="none"?($('input[name="file"]').val(""),document.getElementById("postfield").value=t,temp=$("#filename").val().split("."),extension=temp[temp.length-1],document.getElementById("postfield").value+=extension==="webm"?"[webm]"+window.location.origin+"/uploads/"+$("#filename").val()+"[/webm]":"[img]"+window.location.origin+"/uploads/"+$("#filename").val()+"[/img]",o=$("#postfield"),s=o.val().length,o[0].focus(),o[0].setSelectionRange(s,s),document.getElementById("submitbutton").disabled=!1):i!=="none"&&typeof i!="undefined"&&(alert(i),document.getElementById("submitbutton").disabled=!1);r++},1e3)})})});